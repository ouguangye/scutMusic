(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b046873a"],{"02ff":function(e,t,a){},"14f2":function(e,t,a){"use strict";a("f80e")},"1cb0":function(e,t,a){e.exports=a.p+"static/img/music.4db6753d.png"},"3b28":function(e,t,a){"use strict";a("02ff")},6215:function(e,t,a){e.exports=a.p+"static/img/normal_user.ba79fb72.png"},"73e4":function(e,t,a){},"746f2":function(e,t,a){"use strict";a("d07d")},8855:function(e,t,a){"use strict";a("eeab")},"8e65":function(e,t,a){"use strict";a("9c4f")},"9c4f":function(e,t,a){},"9ed6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[0===e.index?a("Login",{on:{listenEvent:e.changeIndex}}):1===e.index?a("RegisterPage",{on:{listenEvent:e.changeIndex}}):a("FindPassword",{on:{listenEvent:e.changeIndex}})],1)},n=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("img",{attrs:{src:a("1cb0"),alt:"icon"}}),s("h3",{staticClass:"title"},[e._v("创建华工静听账户")])]),s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),s("el-form-item",{attrs:{prop:"password1"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password1",attrs:{type:e.passwordType,placeholder:"input Password again",tabindex:"2"},model:{value:e.loginForm.password1,callback:function(t){e.$set(e.loginForm,"password1",t)},expression:"loginForm.password1"}})],1),s("el-form-item",{attrs:{prop:"email"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{staticStyle:{"font-size":"20px"},attrs:{"icon-class":"email"}})],1),s("el-input",{ref:"email",attrs:{placeholder:"email",name:"email",tabindex:"2","auto-complete":"on"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),s("el-form-item",{attrs:{prop:"avatarImage"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"image"}})],1),s("el-input",{ref:"avatarImage",attrs:{placeholder:"please input your avatar image link",name:"avatarImage",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.avatarImage,callback:function(t){e.$set(e.loginForm,"avatarImage",t)},expression:"loginForm.avatarImage"}})],1),s("div",{staticStyle:{width:"100%","margin-bottom":"30px",display:"flex","justify-content":"space-around"}},[s("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister(t)}}},[e._v("Register")]),s("el-button",{on:{click:e.backToLogin}},[e._v("Back to Login")])],1)],1)],1)},o=[],i=a("c7eb"),l=a("1da1"),c=a("61f7"),u=a("d86f"),p={name:"RegisterPage",data:function(){var e=this,t=function(e,t,a){Object(c["c"])(t)?a():a(new Error("Please enter the correct user name"))},s=function(e,t,a){t.length<5?a(new Error("The password can not be less than 6 digits")):a()},n=function(t,a,s){a!==e.loginForm.password?s(new Error("保证两次输入的密码相同")):s()},r=function(e,t,a){Object(c["b"])(t)?a():a(new Error("Please enter the correct email name"))};return{loginForm:{username:"",password:"",password1:"",email:"",avatarImage:""},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:s}],password1:[{required:!0,trigger:"blur",validator:n}],email:[{required:!0,trigger:"blur",validator:r}]},loading:!1,passwordType:"password",redirect:void 0,options:[{value:"选项1",label:"普通用户",imgSrc:a("6215")},{value:"选项2",label:"管理员",imgSrc:a("b0dd")}],value:"选项1"}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleRegister:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var a,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,a={username:e.loginForm.username,password:e.loginForm.password,email:e.loginForm.email,avatarImage:e.loginForm.avatarImage},t.next=4,Object(u["B"])(a);case 4:s=t.sent,"success"===s.data.msg?(e.$message("注册成功!!! 将自动跳转登录界面"),setTimeout(e.backToLogin(),1e3)):e.$message.error(s.data.msg),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},backToLogin:function(){this.$emit("listenEvent",0)}}},d=p,m=(a("3b28"),a("8e65"),a("2877")),g=Object(m["a"])(d,r,o,!1,null,"4eff909a",null),f=g.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",[s("el-select",{attrs:{clearable:"",placeholder:"请选择身份"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[s("text",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("请选择当前身份")]),e._l(e.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[s("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:t.imgSrc,alt:""}}),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"15px"}},[e._v(e._s(t.label))])])}))],2)],1),s("div",{staticClass:"title-container"},[s("img",{attrs:{src:a("1cb0"),alt:""}}),s("h3",{staticClass:"title"},[e._v("欢迎使用华工静听")])]),s("transition",{attrs:{name:"plus-icon"}},["1"===e.value?s("div",[s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),s("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("Login")]),s("div",{staticClass:"tips"},[s("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"text"},on:{click:function(t){return e.JumpTo(2)}}},[e._v("忘记密码")]),s("el-button",{attrs:{type:"text"},on:{click:function(t){return e.JumpTo(1)}}},[e._v("还没注册？")])],1)],1):s("div",{staticStyle:{margin:"30px 120px"}},[s("el-button",{staticStyle:{width:"240px",height:"60px"},attrs:{type:"primary"},on:{click:e.JumpToAdminForAlbum}},[e._v(" 跳转到管理员-专辑管理页面 "),s("i",{staticClass:"el-icon-position",staticStyle:{"font-size":"20px"}})]),s("el-button",{staticStyle:{margin:"30px 0",width:"240px",height:"60px"},attrs:{type:"primary"},on:{click:e.JumpToAdmin}},[e._v(" 跳转到管理员-后台管理页面 "),s("i",{staticClass:"el-icon-position",staticStyle:{"font-size":"20px"}})])],1)])],1)],1)},v=[],h=a("5f87"),b={name:"Login",data:function(){var e=function(e,t,a){Object(c["c"])(t)?a():a(new Error("Please enter the correct user name"))},t=function(e,t,a){t.length<5?a(new Error("The password can not be less than 6 digits")):a()};return{role:1,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,passwordType:"password",redirect:void 0,options:[{value:"1",label:"普通用户",imgSrc:a("6215")},{value:"2",label:"管理员",imgSrc:a("b0dd")}],value:"1"}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(a){var s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}return e.loading=!0,t.next=4,Object(u["A"])({username:e.loginForm.username,password:e.loginForm.password});case 4:if(s=t.sent,s.data){t.next=8;break}return console.log("res为空"),t.abrupt("return");case 8:if("success"!==s.data.msg){t.next=17;break}return console.log(s.data.result),Object(h["c"])(s.data.result.username),t.next=13,e.$store.dispatch("user/login",s.data.result);case 13:e.loading=!1,e.$router.push({path:e.redirect||"/"}),t.next=19;break;case 17:e.$message.error(s.data.msg),e.loading=!1;case 19:t.next=23;break;case 21:return console.log("error submit!!"),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},JumpTo:function(e){this.$emit("listenEvent",e)},JumpToOtherPage:function(e,t){window.open(e,"_blank"),this.$message(t)},JumpToAdminForAlbum:function(){this.JumpToOtherPage("/admin/index/album/","登录成功，现在打开管理专辑页面")},JumpToAdmin:function(){this.JumpToOtherPage("/admin","登录成功，现在打开管理后台页面")}}},x=b,y=(a("cd42"),a("746f2"),Object(m["a"])(x,w,v,!1,null,"232f08c4",null)),k=y.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("img",{attrs:{src:a("1cb0"),alt:"icon"}}),s("h3",{staticClass:"title"},[e._v("找回密码")])]),s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"new Password",name:"password",tabindex:"2"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),s("el-form-item",{attrs:{prop:"password1"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password1",attrs:{type:e.passwordType,placeholder:"input Password again",tabindex:"2"},model:{value:e.loginForm.password1,callback:function(t){e.$set(e.loginForm,"password1",t)},expression:"loginForm.password1"}})],1),s("el-form-item",{attrs:{prop:"auth_code"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{staticStyle:{"font-size":"20px"},attrs:{"icon-class":"auth_token"}})],1),s("el-input",{ref:"auth_code",attrs:{placeholder:"auth_code",name:"auth_code",tabindex:"2","auto-complete":"on"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}},[s("el-button",{staticStyle:{"margin-top":"10px"},attrs:{slot:"suffix",type:"primary",size:"small"},on:{click:e.getAuth},slot:"suffix"},[e._v(" "+e._s(e.content)+" ")])],1)],1),s("div",{staticStyle:{width:"100%","margin-bottom":"30px",display:"flex","justify-content":"space-around"}},[s("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister(t)}}},[e._v("Confirm")]),s("el-button",{on:{click:e.backToLogin}},[e._v("Back to Login")])],1)],1)],1)},T=[],_={name:"FindPassword",data:function(){var e=this,t=function(e,t,a){Object(c["c"])(t)?a():a(new Error("Please enter the correct user name"))},s=function(e,t,a){t.length<5?a(new Error("The password can not be less than 6 digits")):a()},n=function(t,a,s){a!==e.loginForm.password?s(new Error("保证两次输入的密码相同")):s()};return{content:"发送验证码",totalTime:120,real_auth_code:"",loginForm:{username:"",password:"",password1:"",auth_code:""},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:s}],password1:[{required:!0,trigger:"blur",validator:n}]},loading:!1,passwordType:"password",redirect:void 0,options:[{value:"选项1",label:"普通用户",imgSrc:a("6215")},{value:"选项2",label:"管理员",imgSrc:a("b0dd")}],value:"选项1"}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleRegister:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var a,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,"发送验证码"!==e.content){t.next=4;break}return e.$message.error("超时，验证码无效！！！"),t.abrupt("return");case 4:if(e.loginForm.auth_code!==e.real_auth_code){t.next=7;break}return e.$message.error("验证码输入错误"),t.abrupt("return");case 7:return a={username:e.loginForm.username,password:e.loginForm.password},t.next=10,Object(u["x"])(a);case 10:s=t.sent,"success"===s.data.msg?(e.$message("密码更改成功!!! 将自动跳转登录界面"),setTimeout(e.backToLogin(),1e3)):e.$message.error(s.data.msg),e.loading=!1;case 13:case"end":return t.stop()}}),t)})))()},backToLogin:function(){this.$emit("listenEvent",0)},getAuth:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.countDown(),t.next=3,Object(u["h"])({username:e.loginForm.username});case 3:a=t.sent,"success"===a.data.msg?e.real_auth_code=a.data.result:e.$message(a.data.msg);case 5:case"end":return t.stop()}}),t)})))()},countDown:function(){var e=this;this.content=this.totalTime+"s后重新发送";var t=window.setInterval((function(){e.totalTime--,e.content=e.totalTime+"s后重新发送",e.totalTime<0&&(window.clearInterval(t),e.content="重新发送验证码",e.totalTime=60)}),1e3)}}},$=_,O=(a("8855"),a("14f2"),Object(m["a"])($,F,T,!1,null,"21a1b0d8",null)),C=O.exports,j={name:"LoginPage",components:{FindPassword:C,Login:k,RegisterPage:f},data:function(){return{index:0}},methods:{changeIndex:function(e){this.index=e}}},P=j,S=Object(m["a"])(P,s,n,!1,null,"e1382ce4",null);t["default"]=S.exports},b0dd:function(e,t,a){e.exports=a.p+"static/img/manager.0a8ded91.png"},cd42:function(e,t,a){"use strict";a("73e4")},d07d:function(e,t,a){},eeab:function(e,t,a){},f80e:function(e,t,a){}}]);